---
title: linux常用命令
tags: [Linux,Shell]
author: Yc-Ma
show_author_profile: true
key: 2020-07-06-linux常用命令
pageview: true
---

Here's the table of contents:
1. TOC
{:toc}

## 磁盘操作
### 查看磁盘剩余空间大小
```
df -h
```
### 查看某个目录占用的存储大小
```
du -ah --max-depth=1
```

### 查看文件大小
```
ll -lh import/hold-data.csv
```

### 查看文件行数
```
wc -l import/hold-data.csv
```

### 查看被占用的端口【3000端口】
```
netstat -tunlp |grep 3000
```

### 设置shell脚本格式
VIM进入文件然后设置文件格式【Linux下运行bash脚本显示“: /usr/bin/env: "bash\r": 没有那个文件或目录】
```
：set ff
：set ff=unix
：wq!
```
## 打印文件第一行
```
 head -1 t_equityquality_clear.csv
```
## 打印文件某几行
```
# 第五行到第十行
 sed -n '5,10p' filename
```
## 查看PID对应的详细信息
```
ll /proc/PID
```
## 用户添加到sudoers file
```
vim /etc/sudoers
```

## CentOS支持最大线程数
```
cat /proc/sys/kernel/threads-max
```

## 用户最多可启动的进程数目[-u 进程数目:]
```
cat /proc/sys/kernel/pid_max
ulimit -u
```
## 显示当前的各种用户进程限制
```
ulimit -a
```
## 设置
```
用户的最大进程数：ulimit -u 504433
每个进程可打开的文件数：ulimit -n 65536
数据段长度：ulimit -d unlimited
最大内存大小：ulimit -m unlimited
堆栈大小：ulimit -s unlimited
CPU 时间：ulimit -t unlimited
虚拟内存：ulimit -v unlimited
```
```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 256922
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1000000
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 4096
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited
```

## 多个文件合并到新文件
```
cat text.txt text2.txt text3.txt > text0.txt
```

## 打包某个目录下的文件并忽略某些文件
```
zip -r ongdb.zip ongdb-enterprise-3.5.17 -x "./ongdb-enterprise-3.5.17/data/databases/*" -x "./ongdb-enterprise-3.5.17/import/*" -x "./ongdb-enterprise-3.5.17/logs/*" -x "./ongdb-enterprise-3.5.17/metrics/*"
```
## 覆盖写文件
```
# 覆盖写入日期到文件
date  > not_append_file.txt
echo "hello" > yes_append_file.txt
```
## 追加写入内容到文件
```
echo "hello" >> yes_append_file.txt
date >>  yes_append_file.txt
```
## 在文件的第一行写入
```
sed -i '1 i hello' sample.txt
```
## 从第几行开始截取文件到一个新文件
```
sed -n '1350679,2151443p'  hive.log.2018-06-26  >> daxin.log
```
