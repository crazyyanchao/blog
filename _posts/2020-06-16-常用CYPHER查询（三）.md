---
title: 常用CYPHER查询（三）
tags: [ONgDB,Cypher]
author: Yc-Ma
show_author_profile: true
key: 2020-06-16-常用CYPHER查询（三）
pageview: true
---

Here's the table of contents:
1. TOC
{:toc}

### STRING类型的时间转为LONG类型
```
WITH '20201123092403' AS hupdatetime
RETURN TOINTEGER(hupdatetime) AS lTime
```

### 加载三元组数据-数据模型可视化插件支持的数据格式
```
CALL apoc.load.jdbc('jdbc:mysql://datalab-contentdb-dev.crkldnwly6ki.rds.cn-north-1.amazonaws.com.cn:3306/analytics_graph_data?user=dev&password=datalabgogo&useUnicode=true&characterEncoding=utf8&serverTimezone=UTC', 'SELECT `from`,relationship,`to` FROM ONGDB_TASK_CHECK_POINT') YIELD row WITH COLLECT(row) AS rowList WITH REDUCE(nodes=[],map IN rowList | nodes+({id:map.from,properties:{name:map.from}})) AS fromNodes,REDUCE(nodes=[],map IN rowList | nodes+({id:map.to,properties:{name:map.to}})) AS toNodes,REDUCE(relationships=[],map IN rowList | relationships+({type:map.relationship,startNode:map.from,endNode:map.to})) AS relationships
WITH apoc.coll.union(fromNodes,toNodes) AS nodes,relationships
RETURN {graph:{nodes:nodes,relationships:relationships}} AS graphData
```

